//
// Dust - Asynchronous Templating v0.2.5
// http://akdubya.github.com/dustjs
//
// Copyright (c) 2010, Aleksander Williams
// Released under the MIT License.
//

var dust={};
(function(o){function A(e,j,k){this.stack=e;this.global=j;this.blocks=k}function H(e,j,k,v){this.tail=j;this.isObject=!o.isArray(e)&&e&&typeof e==="object";this.head=e;this.index=k;this.of=v}function q(e){this.head=new l(this);this.callback=e;this.out=""}function J(){this.head=new l(this)}function l(e,j,k){this.root=e;this.next=j;this.data="";this.flushable=false;this.taps=k}function G(e,j){this.head=e;this.tail=j}o.cache={};o.register=function(e,j){if(e)o.cache[e]=j};o.render=function(e,j,k){k=(new q(k)).head;
o.load(e,k,A.wrap(j)).end()};o.stream=function(e,j){var k=new J;o.nextTick(function(){o.load(e,k.head,A.wrap(j)).end()});return k};o.renderSource=function(e,j,k){return o.compileFn(e)(j,k)};o.compileFn=function(e,j){var k=o.loadSource(o.compile(e,j));return function(v,y){var E=y?new q(y):new J;o.nextTick(function(){k(E.head,A.wrap(v)).end()});return E}};o.load=function(e,j,k){var v=o.cache[e];if(v)return v(j,k);else{if(o.onLoad)return j.map(function(y){o.onLoad(e,function(E,K){if(E)return y.setError(E);
o.cache[e]||o.loadSource(o.compile(K,e));o.cache[e](y,k).end()})});return j.setError(Error("Template Not Found: "+e))}};o.loadSource=function(e){return eval(e)};o.isArray=Array.isArray?Array.isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"};o.nextTick=function(e){setTimeout(e,0)};o.isEmpty=function(e){if(o.isArray(e)&&!e.length)return true;if(e===0)return false;return!e};o.filter=function(e,j,k){for(var v=k.length,y=0;y<v;y++){var E=k[y];if(E==="s")j=null;else e=o.filters[E](e)}if(j)e=
o.filters[j](e);return e};o.filters={h:function(e){return o.escapeHtml(e)},j:function(e){return o.escapeJs(e)},u:encodeURI,uc:encodeURIComponent};o.makeBase=function(e){return new A(new H,e)};A.wrap=function(e){if(e instanceof A)return e;return new A(new H(e))};A.prototype.get=function(e){for(var j=this.stack,k;j;){if(j.isObject){k=j.head[e];if(k!==undefined)return k}j=j.tail}return this.global?this.global[e]:undefined};A.prototype.getPath=function(e,j){var k=this.stack,v=j.length;if(e&&v===0)return k.head;
if(k.isObject){k=k.head;for(var y=0;k&&y<v;){k=k[j[y]];y++}return k}};A.prototype.push=function(e,j,k){return new A(new H(e,this.stack,j,k),this.global,this.blocks)};A.prototype.rebase=function(e){return new A(new H(e),this.global,this.blocks)};A.prototype.current=function(){return this.stack.head};A.prototype.getBlock=function(e){var j=this.blocks;if(j)for(var k=j.length,v;k--;)if(v=j[k][e])return v};A.prototype.shiftBlocks=function(e){var j=this.blocks;if(e){newBlocks=j?j.concat([e]):[e];return new A(this.stack,
this.global,newBlocks)}return this};q.prototype.flush=function(){for(var e=this.head;e;){if(e.flushable)this.out+=e.data;else{if(e.error){this.callback(e.error);this.flush=function(){}}return}this.head=e=e.next}this.callback(null,this.out)};J.prototype.flush=function(){for(var e=this.head;e;){if(e.flushable)this.emit("data",e.data);else{if(e.error){this.emit("error",e.error);this.flush=function(){}}return}this.head=e=e.next}this.emit("end")};J.prototype.emit=function(e,j){var k=this.events;k&&k[e]&&
k[e](j)};J.prototype.on=function(e,j){if(!this.events)this.events={};this.events[e]=j;return this};l.prototype.write=function(e){var j=this.taps;if(j)e=j.go(e);this.data+=e;return this};l.prototype.end=function(e){e&&this.write(e);this.flushable=true;this.root.flush();return this};l.prototype.map=function(e){var j=new l(this.root,this.next,this.taps),k=new l(this.root,j,this.taps);this.next=k;this.flushable=true;e(k);return j};l.prototype.tap=function(e){var j=this.taps;this.taps=j?j.push(e):new G(e);
return this};l.prototype.untap=function(){this.taps=this.taps.tail;return this};l.prototype.render=function(e,j){return e(this,j)};l.prototype.reference=function(e,j,k,v){if(typeof e==="function"){e=e(this,j,null,{auto:k,filters:v});if(e instanceof l)return e}return o.isEmpty(e)?this:this.write(o.filter(e,k,v))};l.prototype.section=function(e,j,k,v){if(typeof e==="function"){e=e(this,j,k,v);if(e instanceof l)return e}var y=k.block;k=k["else"];if(v)j=j.push(v);if(o.isArray(e)){if(y){v=e.length;k=this;
for(var E=0;E<v;E++)k=y(k,j.push(e[E],E,v));return k}}else if(e===true){if(y)return y(this,j)}else if(e||e===0){if(y)return y(this,j.push(e))}else if(k)return k(this,j);return this};l.prototype.exists=function(e,j,k){var v=k.block;k=k["else"];if(o.isEmpty(e)){if(k)return k(this,j)}else if(v)return v(this,j);return this};l.prototype.notexists=function(e,j,k){var v=k.block;k=k["else"];if(o.isEmpty(e)){if(v)return v(this,j)}else if(k)return k(this,j);return this};l.prototype.block=function(e,j,k){k=
k.block;if(e)k=e;if(k)return k(this,j);return this};l.prototype.partial=function(e,j){if(typeof e==="function")return this.capture(e,j,function(k,v){o.load(k,v,j).end()});return o.load(e,this,j)};l.prototype.helper=function(e,j,k,v){return o.helpers[e](this,j,k,v)};l.prototype.capture=function(e,j,k){return this.map(function(v){var y=new q(function(E,K){E?v.setError(E):k(K,v)});e(y.head,j).end()})};l.prototype.setError=function(e){this.error=e;this.root.flush();return this};o.helpers={sep:function(e,
j,k){if(j.stack.index===j.stack.of-1)return e;return k.block(e,j)},idx:function(e,j,k){return k.block(e,j.push(j.stack.index))}};G.prototype.push=function(e){return new G(e,this)};G.prototype.go=function(e){for(var j=this;j;){e=j.head(e);j=j.tail}return e};var r=/[&<>\"]/,n=/&/g,x=/</g,w=/>/g,z=/\"/g;o.escapeHtml=function(e){if(typeof e==="string"){if(!r.test(e))return e;return e.replace(n,"&amp;").replace(x,"&lt;").replace(w,"&gt;").replace(z,"&quot;")}return e};var C=/\\/g,D=/\r/g,O=/\u2028/g,L=
/\u2029/g,U=/\n/g,I=/\f/g,P=/'/g,S=/"/g,T=/\t/g;o.escapeJs=function(e){if(typeof e==="string")return e.replace(C,"\\\\").replace(S,'\\"').replace(P,"\\'").replace(D,"\\r").replace(O,"\\u2028").replace(L,"\\u2029").replace(U,"\\n").replace(I,"\\f").replace(T,"\\t");return e}})(dust);if(typeof exports!=="undefined"){require("./server")(dust);module.exports=dust}
(function(o){function A(r,n){for(var x=[n[0]],w=1,z=n.length;w<z;w++){var C=o.filterNode(r,n[w]);C&&x.push(C)}return x}function H(r,n){return n}function q(){}function J(r,n,x){return"."+x+"("+o.compileNode(r,n[1])+","+o.compileNode(r,n[2])+","+o.compileNode(r,n[4])+","+o.compileNode(r,n[3])+")"}o.compile=function(r,n){var x,w=o.parse(r);x=o.filterNode({},w);w={name:n,bodies:[],blocks:{},index:0,auto:"h"};x="(function(){dust.register("+(n?'"'+n+'"':"null")+","+o.compileNode(w,x)+");";var z;var C=[],
D=w.blocks;for(z in D)C.push(z+":"+D[z]);if(C.length){w.blocks="ctx=ctx.shiftBlocks(blocks);";z="var blocks={"+C.join(",")+"};"}else z=w.blocks="";z=x+z;x=[];C=w.bodies;w=w.blocks;D=0;for(var O=C.length;D<O;D++)x[D]="function body_"+D+"(chk,ctx){"+w+"return chk"+C[D]+";}";w=x.join("");return z+w+"return body_0;})();"};o.filterNode=function(r,n){return o.optimizers[n[0]](r,n)};o.optimizers={body:function(r,n){for(var x=[n[0]],w,z=1,C=n.length;z<C;z++){var D=o.filterNode(r,n[z]);if(D)if(D[0]==="buffer")if(w)w[1]+=
D[1];else{w=D;x.push(D)}else{w=null;x.push(D)}}return x},buffer:H,special:function(r,n){return["buffer",l[n[1]]]},format:q,reference:A,"#":A,"?":A,"^":A,"<":A,"+":A,"@":A,partial:A,context:A,params:A,bodies:A,param:A,filters:H,key:H,path:H,literal:H,comment:q};var l={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};o.compileNode=function(r,n){return o.nodes[n[0]](r,n)};o.nodes={body:function(r,n){for(var x=r.index++,w="body_"+x,z="",C=1,D=n.length;C<D;C++)z+=o.compileNode(r,n[C]);r.bodies[x]=z;return w},buffer:function(r,
n){return".write("+G(n[1])+")"},format:function(r,n){return".write("+G(n[1]+n[2])+")"},reference:function(r,n){return".reference("+o.compileNode(r,n[1])+",ctx,"+o.compileNode(r,n[2])+")"},"#":function(r,n){return J(r,n,"section")},"?":function(r,n){return J(r,n,"exists")},"^":function(r,n){return J(r,n,"notexists")},"<":function(r,n){for(var x=n[4],w=1,z=x.length;w<z;w++){var C=x[w];if(C[1][1]==="block"){r.blocks[n[1].text]=o.compileNode(r,C[2]);break}}return""},"+":function(r,n){return".block(ctx.getBlock("+
G(n[1].text)+"),"+o.compileNode(r,n[2])+","+o.compileNode(r,n[4])+","+o.compileNode(r,n[3])+")"},"@":function(r,n){return".helper("+G(n[1].text)+","+o.compileNode(r,n[2])+","+o.compileNode(r,n[4])+","+o.compileNode(r,n[3])+")"},partial:function(r,n){return".partial("+o.compileNode(r,n[1])+","+o.compileNode(r,n[2])+")"},context:function(r,n){if(n[1])return"ctx.rebase("+o.compileNode(r,n[1])+")";return"ctx"},params:function(r,n){for(var x=[],w=1,z=n.length;w<z;w++)x.push(o.compileNode(r,n[w]));if(x.length)return"{"+
x.join(",")+"}";return"null"},bodies:function(r,n){for(var x=[],w=1,z=n.length;w<z;w++)x.push(o.compileNode(r,n[w]));return"{"+x.join(",")+"}"},param:function(r,n){return o.compileNode(r,n[1])+":"+o.compileNode(r,n[2])},filters:function(r,n){for(var x=[],w=1,z=n.length;w<z;w++)x.push('"'+n[w]+'"');return'"'+r.auto+'",['+x.join(",")+"]"},key:function(r,n){return'ctx.get("'+n[1]+'")'},path:function(r,n){for(var x=n[1],w=n[2],z=[],C=0,D=w.length;C<D;C++)z.push('"'+w[C]+'"');return"ctx.getPath("+x+",["+
z.join(",")+"])"},literal:function(r,n){return G(n[1])}};var G=typeof JSON==="undefined"?function(r){return'"'+o.escapeJs(r)+'"'}:JSON.stringify})(typeof exports!=="undefined"?exports:window.dust);
(function(o){var A=function(){var H={parse:function(q){function J(p){return'"'+p.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\n/g,"\\n")+'"'}function l(p){if(!(a<Q)){if(a>Q){Q=a;V=[]}V.push(p)}}function G(){var p="body@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=[];for(var c=r();c!==null;){b.push(c);c=r()}b=b!==null?["body"].concat(b):null;u[p]={nextPos:a,result:b};return b}function r(){var p="part@"+a,b=u[p];
if(b){a=b.nextPos;return b.result}b=j();if(b!==null)b=b;else{b=n();if(b!==null)b=b;else{b="partial@"+a;var c=u[b];if(c){a=c.nextPos;b=c.result}else{c=h;h=false;var d=a,g=v();if(g!==null){if(q.substr(a,1)===">"){var f=">";a+=1}else{f=null;h&&l('">"')}if(f!==null){var i=I();i=i!==null?["literal",i]:null;if(i!==null)i=i;else{i=P();i=i!==null?i:null}if(i!==null){var m=z();if(m!==null){if(q.substr(a,1)==="/"){var s="/";a+=1}else{s=null;h&&l('"/"')}if(s!==null){var t=y();if(t!==null)g=[g,f,i,m,s,t];else{g=
null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}d=g!==null?["partial",g[2],g[3]]:null;(h=c)&&d===null&&l("partial");u[b]={nextPos:a,result:d};b=d}if(b!==null)b=b;else{b=O();if(b!==null)b=b;else{b=D();if(b!==null)b=b;else{b="buffer@"+a;if(c=u[b]){a=c.nextPos;b=c.result}else{c=h;h=false;d=a;g=E();if(g!==null){f=[];for(i=K();i!==null;){f.push(i);i=K()}if(f!==null)g=[g,f];else{g=null;a=d}}else{g=null;a=d}d=g!==null?["format",g[0],g[1].join("")]:null;if(d!==
null)d=d;else{i=g=a;f=h;h=false;m=k();h=f;if(m===null)f="";else{f=null;a=i}if(f!==null){m=a;i=h;h=false;s=E();h=i;if(s===null)i="";else{i=null;a=m}if(i!==null){m=a;s=h;h=false;t=j();h=s;if(t===null)s="";else{s=null;a=m}if(s!==null){if(q.length>a){m=q.charAt(a);a++}else{m=null;h&&l("any character")}if(m!==null)f=[f,i,s,m];else{f=null;a=g}}else{f=null;a=g}}else{f=null;a=g}}else{f=null;a=g}g=f!==null?f[3]:null;if(g!==null)for(d=[];g!==null;){d.push(g);i=g=a;f=h;h=false;m=k();h=f;if(m===null)f="";else{f=
null;a=i}if(f!==null){m=a;i=h;h=false;s=E();h=i;if(s===null)i="";else{i=null;a=m}if(i!==null){m=a;s=h;h=false;t=j();h=s;if(t===null)s="";else{s=null;a=m}if(s!==null){if(q.length>a){m=q.charAt(a);a++}else{m=null;h&&l("any character")}if(m!==null)f=[f,i,s,m];else{f=null;a=g}}else{f=null;a=g}}else{f=null;a=g}}else{f=null;a=g}g=f!==null?f[3]:null}else d=null;d=d!==null?["buffer",d.join("")]:null;d=d!==null?d:null}(h=c)&&d===null&&l("buffer");u[b]={nextPos:a,result:d};b=d}b=b!==null?b:null}}}}}u[p]={nextPos:a,
result:b};return b}function n(){var p="section@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=x();if(d!==null){var g=y();if(g!==null){var f=G();if(f!==null){var i=C();if(i!==null){var m=w();if(m!==null){var s=d[1].text===m.text?"":null;if(s!==null)d=[d,g,f,i,m,s];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(t,B,M){M.push(["param",["literal","block"],B]);t.push(M);return t}(d[0],d[2],d[3],d[4]):null;if(c!==
null)c=c;else{c=a;d=x();if(d!==null){if(q.substr(a,1)==="/"){g="/";a+=1}else{g=null;h&&l('"/"')}if(g!==null){f=y();if(f!==null)d=[d,g,f];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(t){t.push(["bodies"]);return t}(d[0]):null;c=c!==null?c:null}(h=b)&&c===null&&l("section");u[p]={nextPos:a,result:c};return c}function x(){var p="sec_tag_start@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=a;var c=v();if(c!==null){if(q.substr(a).match(/^[#?^<+@]/)!==null){var d=q.charAt(a);a++}else{d=
null;h&&l("[#?^<+@]")}if(d!==null){var g=L();if(g!==null){var f=z();if(f!==null){var i;i="params@"+a;var m=u[i];if(m){a=m.nextPos;i=m.result}else{m=h;h=false;var s=[],t=a,B=K();if(B!==null){var M=I();if(M!==null){if(q.substr(a,1)==="="){var N="=";a+=1}else{N=null;h&&l('"="')}if(N!==null){var F=L();if(F!==null)F=F;else{F=P();F=F!==null?F:null}if(F!==null)B=[B,M,N,F];else{B=null;a=t}}else{B=null;a=t}}else{B=null;a=t}}else{B=null;a=t}for(t=B!==null?["param",["literal",B[1]],B[3]]:null;t!==null;){s.push(t);
t=a;B=K();if(B!==null){M=I();if(M!==null){if(q.substr(a,1)==="="){N="=";a+=1}else{N=null;h&&l('"="')}if(N!==null){F=L();if(F!==null)F=F;else{F=P();F=F!==null?F:null}if(F!==null)B=[B,M,N,F];else{B=null;a=t}}else{B=null;a=t}}else{B=null;a=t}}else{B=null;a=t}t=B!==null?["param",["literal",B[1]],B[3]]:null}s=s!==null?["params"].concat(s):null;(h=m)&&s===null&&l("params");u[i]={nextPos:a,result:s};i=s}if(i!==null)c=[c,d,g,f,i];else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=
null;a=b}b=c!==null?[c[1],c[2],c[3],c[4]]:null;u[p]={nextPos:a,result:b};return b}function w(){var p="end_tag@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=v();if(d!==null){if(q.substr(a,1)==="/"){var g="/";a+=1}else{g=null;h&&l('"/"')}if(g!==null){var f=L();if(f!==null){var i=y();if(i!==null)d=[d,g,f,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?d[2]:null;(h=b)&&c===null&&l("end tag");u[p]={nextPos:a,result:c};return c}function z(){var p="context@"+
a,b=u[p];if(b){a=b.nextPos;return b.result}b=a;if(q.substr(a,1)===":"){var c=":";a+=1}else{c=null;h&&l('":"')}if(c!==null){var d=L();if(d!==null)c=[c,d];else{c=null;a=b}}else{c=null;a=b}b=c!==null?c[1]:null;b=b!==null?b:"";b=b!==null?b?["context",b]:["context"]:null;u[p]={nextPos:a,result:b};return b}function C(){var p="bodies@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=[],d=a,g=v();if(g!==null){if(q.substr(a,1)===":"){var f=":";a+=1}else{f=null;h&&l('":"')}if(f!==null){var i=I();
if(i!==null){var m=y();if(m!==null){var s=G();if(s!==null)g=[g,f,i,m,s];else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}for(d=g!==null?["param",["literal",g[2]],g[4]]:null;d!==null;){c.push(d);d=a;g=v();if(g!==null){if(q.substr(a,1)===":"){f=":";a+=1}else{f=null;h&&l('":"')}if(f!==null){i=I();if(i!==null){m=y();if(m!==null){s=G();if(s!==null)g=[g,f,i,m,s];else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}}else{g=null;a=d}d=g!==null?["param",["literal",
g[2]],g[4]]:null}c=c!==null?["bodies"].concat(c):null;(h=b)&&c===null&&l("bodies");u[p]={nextPos:a,result:c};return c}function D(){var p="reference@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=v();if(d!==null){var g=L();if(g!==null){var f;f="filters@"+a;var i=u[f];if(i){a=i.nextPos;f=i.result}else{i=h;h=false;var m=[],s=a;if(q.substr(a,1)==="|"){var t="|";a+=1}else{t=null;h&&l('"|"')}if(t!==null){var B=I();if(B!==null)t=[t,B];else{t=null;a=s}}else{t=null;a=s}for(s=t!==null?t[1]:
null;s!==null;){m.push(s);s=a;if(q.substr(a,1)==="|"){t="|";a+=1}else{t=null;h&&l('"|"')}if(t!==null){B=I();if(B!==null)t=[t,B];else{t=null;a=s}}else{t=null;a=s}s=t!==null?t[1]:null}m=m!==null?["filters"].concat(m):null;(h=i)&&m===null&&l("filters");u[f]={nextPos:a,result:m};f=m}if(f!==null){i=y();if(i!==null)d=[d,g,f,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["reference",d[1],d[2]]:null;(h=b)&&c===null&&l("reference");u[p]={nextPos:a,result:c};return c}function O(){var p=
"special@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=v();if(d!==null){if(q.substr(a,1)==="~"){var g="~";a+=1}else{g=null;h&&l('"~"')}if(g!==null){var f=I();if(f!==null){var i=y();if(i!==null)d=[d,g,f,i];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["special",d[2]]:null;(h=b)&&c===null&&l("special");u[p]={nextPos:a,result:c};return c}function L(){var p="identifier@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=U();c=c!==null?W(["path"].concat(c),
p):null;if(c!==null)c=c;else{c=I();c=c!==null?W(["key",c],p):null;c=c!==null?c:null}(h=b)&&c===null&&l("identifier");u[p]={nextPos:a,result:c};return c}function U(){var p="path@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=I();d=d!==null?d:"";if(d!==null){var g=a;if(q.substr(a,1)==="."){var f=".";a+=1}else{f=null;h&&l('"."')}if(f!==null){var i=I();if(i!==null)f=[f,i];else{f=null;a=g}}else{f=null;a=g}g=f!==null?f[1]:null;if(g!==null)for(var m=[];g!==null;){m.push(g);g=a;if(q.substr(a,
1)==="."){f=".";a+=1}else{f=null;h&&l('"."')}if(f!==null){i=I();if(i!==null)f=[f,i];else{f=null;a=g}}else{f=null;a=g}g=f!==null?f[1]:null}else m=null;if(m!==null)d=[d,m];else{d=null;a=c}}else{d=null;a=c}c=d!==null?function(s,t){if(s){t.unshift(s);return[false,t]}return[true,t]}(d[0],d[1]):null;if(c!==null)c=c;else{if(q.substr(a,1)==="."){c=".";a+=1}else{c=null;h&&l('"."')}c=c!==null?[true,[]]:null;c=c!==null?c:null}(h=b)&&c===null&&l("path");u[p]={nextPos:a,result:c};return c}function I(){var p="key@"+
a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a;if(q.substr(a).match(/^[a-zA-Z_$]/)!==null){var d=q.charAt(a);a++}else{d=null;h&&l("[a-zA-Z_$]")}if(d!==null){var g=[];if(q.substr(a).match(/^[0-9a-zA-Z_$]/)!==null){var f=q.charAt(a);a++}else{f=null;h&&l("[0-9a-zA-Z_$]")}for(;f!==null;){g.push(f);if(q.substr(a).match(/^[0-9a-zA-Z_$]/)!==null){f=q.charAt(a);a++}else{f=null;h&&l("[0-9a-zA-Z_$]")}}if(g!==null)d=[d,g];else{d=null;a=c}}else{d=null;a=c}c=d!==null?d[0]+d[1].join(""):null;(h=
b)&&c===null&&l("key");u[p]={nextPos:a,result:c};return c}function P(){var p="inline@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a;if(q.substr(a,1)==='"'){var d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){if(q.substr(a,1)==='"'){var g='"';a+=1}else{g=null;h&&l('"\\""')}if(g!==null)d=[d,g];else{d=null;a=c}}else{d=null;a=c}c=d!==null?["literal",""]:null;if(c!==null)c=c;else{c=a;if(q.substr(a,1)==='"'){d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){g=T();if(g!==null){if(q.substr(a,
1)==='"'){var f='"';a+=1}else{f=null;h&&l('"\\""')}if(f!==null)d=[d,g,f];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["literal",d[1]]:null;if(c!==null)c=c;else{c=a;if(q.substr(a,1)==='"'){d='"';a+=1}else{d=null;h&&l('"\\""')}if(d!==null){f=S();if(f!==null)for(g=[];f!==null;){g.push(f);f=S()}else g=null;if(g!==null){if(q.substr(a,1)==='"'){f='"';a+=1}else{f=null;h&&l('"\\""')}if(f!==null)d=[d,g,f];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["body"].concat(d[1]):null;
c=c!==null?c:null}}(h=b)&&c===null&&l("inline");u[p]={nextPos:a,result:c};return c}function S(){var p="inline_part@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=O();if(b!==null)b=b;else{b=D();if(b!==null)b=b;else{b=T();b=b!==null?["buffer",b]:null;b=b!==null?b:null}}u[p]={nextPos:a,result:b};return b}function T(){var p="literal@"+a,b=u[p];if(b){a=b.nextPos;return b.result}b=h;h=false;var c=a,d=a,g=h;h=false;var f=k();h=g;if(f===null)g="";else{g=null;a=d}if(g!==null){f=a;d=h;h=false;var i=E();h=d;
if(i===null)d="";else{d=null;a=f}if(d!==null){f=e();if(f!==null)f=f;else{if(q.substr(a).match(/^[^"]/)!==null){f=q.charAt(a);a++}else{f=null;h&&l('[^"]')}f=f!==null?f:null}if(f!==null)g=[g,d,f];else{g=null;a=c}}else{g=null;a=c}}else{g=null;a=c}c=g!==null?g[2]:null;if(c!==null)for(var m=[];c!==null;){m.push(c);d=c=a;g=h;h=false;f=k();h=g;if(f===null)g="";else{g=null;a=d}if(g!==null){f=a;d=h;h=false;i=E();h=d;if(i===null)d="";else{d=null;a=f}if(d!==null){f=e();if(f!==null)f=f;else{if(q.substr(a).match(/^[^"]/)!==
null){f=q.charAt(a);a++}else{f=null;h&&l('[^"]')}f=f!==null?f:null}if(f!==null)g=[g,d,f];else{g=null;a=c}}else{g=null;a=c}}else{g=null;a=c}c=g!==null?g[2]:null}else m=null;m=m!==null?m.join(""):null;(h=b)&&m===null&&l("literal");u[p]={nextPos:a,result:m};return m}function e(){var p="esc@"+a,b=u[p];if(b){a=b.nextPos;return b.result}if(q.substr(a,2)==='\\"'){b='\\"';a+=2}else{b=null;h&&l('"\\\\\\""')}b=b!==null?'"':null;u[p]={nextPos:a,result:b};return b}function j(){var p="comment@"+a,b=u[p];if(b){a=
b.nextPos;return b.result}b=h;h=false;var c=a;if(q.substr(a,2)==="{!"){var d="{!";a+=2}else{d=null;h&&l('"{!"')}if(d!==null){var g=[],f=a,i=a,m=h;h=false;if(q.substr(a,2)==="!}"){var s="!}";a+=2}else{s=null;h&&l('"!}"')}h=m;if(s===null)m="";else{m=null;a=i}if(m!==null){if(q.length>a){i=q.charAt(a);a++}else{i=null;h&&l("any character")}if(i!==null)i=[m,i];else{i=null;a=f}}else{i=null;a=f}for(f=i!==null?i[1]:null;f!==null;){g.push(f);i=f=a;m=h;h=false;if(q.substr(a,2)==="!}"){s="!}";a+=2}else{s=null;
h&&l('"!}"')}h=m;if(s===null)m="";else{m=null;a=i}if(m!==null){if(q.length>a){i=q.charAt(a);a++}else{i=null;h&&l("any character")}if(i!==null)i=[m,i];else{i=null;a=f}}else{i=null;a=f}f=i!==null?i[1]:null}if(g!==null){if(q.substr(a,2)==="!}"){f="!}";a+=2}else{f=null;h&&l('"!}"')}if(f!==null)d=[d,g,f];else{d=null;a=c}}else{d=null;a=c}}else{d=null;a=c}c=d!==null?["comment",d[1].join("")]:null;(h=b)&&c===null&&l("comment");u[p]={nextPos:a,result:c};return c}function k(){var p="tag@"+a,b=u[p];if(b){a=
b.nextPos;return b.result}b=a;var c=v();if(c!==null){if(q.substr(a).match(/^[#?^><+%:@\/~]/)!==null){var d=q.charAt(a);a++}else{d=null;h&&l("[#?^><+%:@\\/~]")}if(d!==null){var g=a,f=a,i=h;h=false;var m=y();h=i;if(m===null)i="";else{i=null;a=f}if(i!==null){f=a;m=h;h=false;var s=E();h=m;if(s===null)m="";else{m=null;a=f}if(m!==null){if(q.length>a){f=q.charAt(a);a++}else{f=null;h&&l("any character")}if(f!==null)i=[i,m,f];else{i=null;a=g}}else{i=null;a=g}}else{i=null;a=g}if(i!==null)for(var t=[];i!==null;){t.push(i);
f=g=a;i=h;h=false;m=y();h=i;if(m===null)i="";else{i=null;a=f}if(i!==null){f=a;m=h;h=false;s=E();h=m;if(s===null)m="";else{m=null;a=f}if(m!==null){if(q.length>a){f=q.charAt(a);a++}else{f=null;h&&l("any character")}if(f!==null)i=[i,m,f];else{i=null;a=g}}else{i=null;a=g}}else{i=null;a=g}}else t=null;if(t!==null){g=y();if(g!==null)c=[c,d,t,g];else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}}else{c=null;a=b}if(c!==null)b=c;else{b=D();b=b!==null?b:null}u[p]={nextPos:a,result:b};return b}function v(){var p=
"ld@"+a,b=u[p];if(b){a=b.nextPos;return b.result}if(q.substr(a,1)==="{"){b="{";a+=1}else{b=null;h&&l('"{"')}u[p]={nextPos:a,result:b};return b}function y(){var p="rd@"+a,b=u[p];if(b){a=b.nextPos;return b.result}if(q.substr(a,1)==="}"){b="}";a+=1}else{b=null;h&&l('"}"')}u[p]={nextPos:a,result:b};return b}function E(){var p="eol@"+a,b=u[p];if(b){a=b.nextPos;return b.result}if(q.substr(a,1)==="\n"){b="\n";a+=1}else{b=null;h&&l('"\\n"')}if(b!==null)b=b;else{if(q.substr(a,2)==="\r\n"){b="\r\n";a+=2}else{b=
null;h&&l('"\\r\\n"')}if(b!==null)b=b;else{if(q.substr(a,1)==="\r"){b="\r";a+=1}else{b=null;h&&l('"\\r"')}if(b!==null)b=b;else{if(q.substr(a,1)==="\u2028"){b="\u2028";a+=1}else{b=null;h&&l('"\\u2028"')}if(b!==null)b=b;else{if(q.substr(a,1)==="\u2029"){b="\u2029";a+=1}else{b=null;h&&l('"\\u2029"')}b=b!==null?b:null}}}}u[p]={nextPos:a,result:b};return b}function K(){var p="ws@"+a,b=u[p];if(b){a=b.nextPos;return b.result}if(q.substr(a).match(/^[\t\u000b\u000c \u00a0\ufeff]/)!==null){b=q.charAt(a);a++}else{b=
null;h&&l("[\t\u000b\u000c \u00a0\ufeff]")}u[p]={nextPos:a,result:b};return b}function X(){var p=function(c){c.sort();for(var d=null,g=[],f=0;f<c.length;f++)if(c[f]!==d){g.push(c[f]);d=c[f]}switch(g.length){case 0:return"end of input";case 1:return g[0];default:return g.slice(0,g.length-1).join(", ")+" or "+g[g.length-1]}}(V),b=Math.max(a,Q);b=b<q.length?J(q.charAt(b)):"end of input";return"Expected "+p+" but "+b+" found."}function Y(){for(var p=1,b=1,c=false,d=0;d<Q;d++){var g=q.charAt(d);if(g===
"\n"){c||p++;b=1;c=false}else if(g==="\r"|g==="\u2028"||g==="\u2029"){p++;b=1;c=true}else{b++;c=false}}return{line:p,column:b}}function W(p,b){p.text=q.substring(b.split("@")[1],a);return p}var a=0,h=true,Q=0,V=[],u={},R=G();if(R===null||a!==q.length){R=Y();throw new SyntaxError(X(),R.line,R.column);}return R},toSource:function(){return this._source}};H.SyntaxError=function(q,J,l){this.name="SyntaxError";this.message=q;this.line=J;this.column=l};H.SyntaxError.prototype=Error.prototype;return H}();
o.parse=A.parse})(typeof exports!=="undefined"?exports:window.dust);
